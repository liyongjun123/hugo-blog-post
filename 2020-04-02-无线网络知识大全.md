---
title: "无线网络知识大全"
date: 2020-04-02T19:45:20+08:00
draft: false
categories: ["技术"]
tags: ["经验"]
url: "/2020/04/02/wlan-knowledge.html"
---

# 台上

### 什么是Wi-Fi？

Wi-Fi是一个商标，由Wi-Fi联盟持有。  
Wi-Fi是一项技术，能够让电子设备连接到一个无线局域网。

### Wi-Fi 与 802.11

802.11是一种标准，Wi-Fi是基于此标准的一种具体实现。

### 802.11 与 WLAN

WLAN是一个概念，用来阐述无线局域网，802.11是此概念下的一种具体协议标准。

### 信道、信源、信宿

信道指通信的通道，是信号传输的媒介。  
二人对话，声波通过空气来传送，二人之间的空气就是信道。  
邮政通信的信道是指运载工具及其经过的设施。  
无线电话的信道就是电波传播所通过的空间。  
有线电话的信道是电缆。  
每条信道都有特定的信源和信宿。  
在多路通信，例如载波电话中，  
一个电话机作为发出信息的信源，  
另一个是接收信息的信宿，  
它们之间的设施就是一条信道。

### 频段、带宽

802.11b和802.11g工作在2.4GHz频段，范围是2.4GHz～2.4835GHz，共83.5M带宽

带宽越大，网络的传输能力就越强。好比高速公路的宽度，宽度越宽，车道数就越多，一次允许通过的车辆就更多，道路的吞吐量就越高。

### 所处层次

处于OSI参考模型的最低两层：物理层和数据链路层。

### 定位

和固定式网络形成互补，而非取而代之的技术。

### 优点

提供移动性  
部署方便

### 缺点

频宽有限  
安全性较弱  
传播受阻







# 台下

### 802.11有不少称谓

1. 无线以太网，强调其与传统有线往来(802.3)之间的血缘关系。
2. Wi-Fi，Wi-Fi是Wi-Fi联盟所推广的互通性认证计划。Wi-Fi联盟的前身称为无线以太网络相容联盟
   （Wireless EthernetCompatibility Alliance，简称 WECA），负责检测会员的产品是否与 802.11
   标准相容。

### 802家族

![IEEE 802 家族，以及其与 OSI 模型的关系](/images/IEEE802家族，以及其与OSI模型的关系.png)

### MAC、PHY

只要是802网络，就必然会同时具备MAC和PHY两种元件。  
MAC是一组用于决定如何访问介质与传送数据的规则，至于传送与接的细节则交由PHY负责。

### 802.2/LLC

说穿了，802.11只不过是一种可以利用802.2/LLC封装的协议。802.3、802.5也可以利用这一层。

### 物理层PHY

跳频展频(FHSS)物理层  
直接序列展频(DSSSS)物理层  
802.11b又加入了高速直接序列展频(HR/DSSS)物理层  
802.11a正交频分复用(OFDM)技术

### PHY的组成元件

以无线波为物理层，还需要比较复杂的PHY。  
802.11将PHY进一步划分为两个组成元件：  
一个是物理层收敛程序(PLCP)，负责将MAC帧对应到传输介质。其牛逼，横跨MAC与物理层，如下图。  
另一是实际搭配介质(PMD)，负责传送这些这些帧。

![PHY元件](/images/PHY元件.png)

### 802.11网络包含四种主要实体元件

![802.11LAN的组成原件](/images/802.11LAN的组成原件.png)

- 工作站(Station)  
      工作站，指配备无线网络的计算机设备。

- 基站(Access Point)，也叫无线接入点  
  具备无线至有线(wireless-to-wired)桥接功能的设备称为基站(Access Point，AP);  
  基站的功能不仅于此，但桥接(bridging)最为重要。  
  目前较新的产品结构为："精简型"基站(thin AP) + 基站控制器(APcontroller)。

- 无线介质(Wireless medium)  
  802.11标准以无线介质(Wireless medium)在工作站与基站之间传递帧。  
  其所定义的物理层不只一种，最初标准化了两种：  
  ​	射频(radio frequency，RF)物理层  
  ​	红外线(infrared)物理层  
  然而事后证明RF物理层较受欢迎。  
  
- 传输系统(Distribution system)  
  多个基站各自覆盖，彼此之间必须相互通信。  
  传输系统是基站间传送帧的骨干网络，通常就称为骨干网络。  
  目前几乎都是以以太网作为骨干网络。

### 身份认证

设备想接入有线网络，必须插入网络插座。  
而无线网络无法提供相同层级的实体保护，因此必须依赖额外的身份认证程序，以保证访问网络的使用者已获得授权。  
身份认证是连接的必要前提，只有经过身份辨识的使用者才准许使用网络。

### 802.1x

802.1x 协议是基于 Client/Server 的访问控制和认证协议。

它可以限制未经授权的用户/设备通过接入端口(access port)访问LAN/WLAN。

在获得交换机或LAN提供的各种业务之前，802.1x 对连接到交换机端口上的用户/设备进行认证。

在认证通过之前，802.1x只允许EAPOL(基于局域网的扩展认证协议)数据通过设备连接的交换机端口;

认证通过以后，正常的数据可以顺利地通过以太网端口。

802.1x协议为二层协议，不需要到达三层

802.1x协议体系机构包括3个重要部分：客户端、认证系统、认证服务器。

[工作过程](https://baike.baidu.com/item/802.1x/5635474?fr=aladdin)

(1 当用户有上网需求时打开802.1X客户端程序，输入已经申请、登记过的用户名和口令，发起连接请求。此时，客户端程序将发出请求认证的报文给交换机，开始启动一次认证过程。

(2 交换机收到请求认证的数据帧后，将发出一个请求帧要求用户的客户端程序将输入的用户名送上来。

(3 客户端程序响应交换机发出的请求，将用户名信息通过数据帧送给交换机。交换机将客户端送上来的数据帧经过封包处理后送给认证服务器进行处理。

(4 认证服务器收到交换机转发上来的用户名信息后，将该信息与数据库中的用户名表相比对，找到该用户名对应的口令信息，用随机生成的一个加密字对它进行加密处理，同时也将此加密字传送给交换机，由交换机传给客户端程序。

(5 客户端程序收到由交换机传来的加密字后，用该加密字对口令部分进行加密处理（此种加密算法通常是不可逆的），并通过交换机传给认证服务器。

(6 认证服务器将送上来的加密后的口令信息和其自己经过加密运算后的口令信息进行对比，如果相同，则认为该用户为合法用户，反馈认证通过的消息，并向交换机发出打开端口的指令，允许用户的业务流通过端口访问网络。否则，反馈认证失败的消息，并保持交换机端口的关闭状态，只允许认证信息数据通过而不允许业务数据通过。

### EAP





### MAC 所面临的挑战

#### 射频链路质量

在有线的以太网中，假定对方必然会收到所传送的帧是合理的。无线链路则不然，特别是使用无须授权的ISM频段时。  
窄频(narrowband)传输将会受到噪声与干扰的影响，而不必使用执照的装置也必须假定干扰的存在，必须提供克服干扰的办法。  
和其他链路层协议不同，802.11采用正面回应机制。所有传送出去的帧都必须得到回应，只要任何一个环节失败，该帧即视为已经丢掉。

![2020-04-02-无线网络知识大全-数据传输的正面应答](/images/2020-04-02-无线网络知识大全-数据传输的正面应答.png)

以上步骤称为基本操作，指不可分割的单一处理单元。这样有来必有回也让事情变得比较复杂。在整个通讯过程中，两部工作站必须彼此合作，依次取得网络媒介的控制权，以便进行传输处理。  
802.11允许工作站在基本处理期间锁定媒介，避免基本操作被其他试图竞争传输媒介的工作站打断。  
无线电波的链路品质也会影响网络连接的速度，信号质量较好就可以用较高的速度来传送数据。信号质量通常随着距离的拉长而有所衰减，亦即 802.11 工作站的数据传输速度，取决于他和接入点之间的相对位置。工作站必须具备某种机制，可以判定何时因环境的不变化来调节速率的变换，支持多种速率规则。

#### 隐藏节点的问题

![2020-04-02-无线网络知识大全-隐藏节点](/images/2020-04-02-无线网络知识大全-隐藏节点.png)

节点2可以跟节点1、3通信，但节点1由于某种原因(距离远、有障碍物等)无法跟节点3通信。从1的角度看，3属于隐藏节点。这将导致1和3可能同时传送数据，这会造成2无法辨识任何信息。此外，1和3将无从得知错误发生，因为只有2才知道有冲突发生。  
在无线网络中，碰撞问题很难监听，因为无线接收器通常是半双工工作模式，即无法同时收发数据。  
为了防止碰撞，802.11允许工作站使用请求发送(RTS)和允许发送(CTS)帧来清空传送区域。  
RTS帧本身带有两个目的：预约无线链路的使用权，并要求接收到这一消息的其他工作站停止发言。  
一旦接收到RTS帧，接收段会以CTS帧应答。和RTS帧一样，CTS帧也会令附近的工作站保持沉默。  
整个RTS/CTS传输过程会用到好几个帧，实际开始传输数据之前的延迟也会消耗相当的频宽。因此，它通常只用在高用量的环境，以及传送竞争比较显著的场合。对低用量的环境而言，通常无此必要。  
在小型、不太活跃、只有几个客户端共享一个接入点的网络里，很少会有同时进行传输的情况，何况还有不少闲置频宽可供重传之用。  
随着802.11逐渐成熟，隐藏节点已经不成问题。  
如果802.11网卡的驱动程序支持，使用者可以通过调整RTS门限值来控制RTS/CTS程序。只要大于此门限指，就会进行RTS/CTS交换程序。小于此门限制则会直接传送数据帧。

### MAC帧格式

位的传送顺序由左至右，最高位将会最后出现。

![2020-04-02-无线网络知识大全-MAC帧格式](/images/2020-04-02-无线网络知识大全-MAC帧格式.png)

- Frame Control  
  所有帧的开头均是长度两个元组的Frame Control(帧控制)位。

- Duration/ID 位  
  Duration/ID 位紧跟在 Frame Control 位之后。

- Address 位  
  一个802.11 帧最多包含四个地址位。Address 1 代表接收端，Address 2 代表传送端，Address 3 被接收端拿过来过滤地址。



### 路由器

路由器其实就是一个主机(HOST)，其实和一般的HOST是一样的，不过参数不同，一般的HOST收到不属于本机的包后将包丢掉，而路由器受到不属于本机的包将其转发。

而且，现在的路由器还扮演着gateway的角色，连接不同的子网，为了让每个子网都认识它，必然每个子网都要分配一个IP给它，所以路由器连接多少个子网，至少就有多少个IP。



### 二层交换机每个端口有没有MAC地址

[链接](https://www.xj123.info/1636.html)



### 傅里叶变换

[链接](https://blog.csdn.net/l494926429/article/details/51818012)



### 信号带宽

一个信号所包含谐波的最高频率与最低频率之差，即该信号所拥有的频率范围，定义为该信号的带宽。

譬如，一个由数个正弦波叠加成的方波信号，其最低频率分量是其基频，假定为 f=2kHz，其最高频率分量是其7次谐波频率，即 7f=14kHz，因此该信号带宽为 7f - f = 6f = 12kHz。

理论上，一个方波信号是由无数个正弦波信号组成的，但是，实际通信时不可能把所有的频率都给你使用，你只能使用一小段窄频，你用这一小段带宽去调制你想要的信号，当然这样不可能得到完美的信号，但是能够基本相似，传递你想要传递的信号。



信道带宽限定里允许通过该信道的信号下限频率和上线频率，也就限定里一个频率通带。

比如一个信道允许的通带为1.5kHz至15kHz，其带宽为13.5kHz，上面这个方波信号的所有频率成分当然能从该信道通过，如果不考虑衰减、时延以及噪声等因素，通过此信道的该信号会毫不失真。



### 3db带宽

指功率谱密度的最高点下降到1/2时界定的频率范围。



### 跳频扩频

**跳频（Frequency hopping，简称FH或FHSS）**：跳频系统是以某种随机样式在频率间不断跳换，每个子信道只进行瞬间的传输。

![跳频](/images/跳频.png)

跳频扩频（ Frequency-hopping spread-spread，简称FH或FHSS ）：是以一种预定的伪随机模式快速变换传输频率。  
如上图所示：图中的纵轴将可用频率划分为几个频隙（frequency slot），同样的，时间轴也被划分为一系列时隙（time slot）。  
本图中所用的跳频模式为（3,8,5,7）。正确掌握跳频时机是关键，发送端与接收端必须同步，这样接收端才可以随时与发送端的频率保持一致。

### 子载波

802.11a/g在20MHz模式下有52个子载波，了用的子载波有48个，速度可达54Mbps；

802.11n在20MHz模式下有56个子载波，可用的子载波有52个，速度可达58.5Mbps；



### WLAN漫游

二层漫游

三层漫游

切换触发：

1. 根据当前AP和邻居AP信号强度的比值，达到门限值就启动切换
2. 根据业务，如丢包率，达到门限值就启动切换，此方式切换触发方式比较慢，效果差



### 天线技术介绍

[链接](https://blog.csdn.net/weixin_42353331/article/details/86524945)

### 导行波

由传输线所引导，能沿一定方向传播的电磁波称为导行波。

### 空间自由波

在自由空间传播的电磁波

### 半波对称阵振子

天线的基本辐射单元。

两臂长度相等的振子叫做对称阵子。每臂长度为四分之一波长，全长为二分之一波长的振子，称为半波对称振子。

波长越长，半波振子越长。

振子：能够产生辐射的导线

### 天线极化

电场矢量在空间运动的轨迹

![天线极化](/images/天线极化.png)

### 双极化天线

两个极化在空间相互正交的波

![双极化天线](/images/双极化天线.png)



参考：

[什么叫信道?](https://zhidao.baidu.com/question/13764890.html)