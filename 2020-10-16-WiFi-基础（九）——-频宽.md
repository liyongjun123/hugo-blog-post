---
title: "WiFi 基础（九）—— 频宽"
date: 2020-10-16T15:12:58+08:00
draft: false
categories: ["网络"]
tags: ["Wi-Fi"]
toc: false
url: /2020/10/16/wifi-basic-8-bandwidth.html
---

## 频宽

802.11a 目前使用 20 MHz 频道，因为这是所有管制单位一致允许的频宽。理论上，将频宽倍增为 40 MHz，频道的传输率也会因此倍增。虽然可望在未来开放，一些管制当局目前并不允许 40 MHz 操作。日本是最明显的例子。

## 抓包查看

2.4 G

beacon --> HT Capability Info : 1 个位元，如果设置为1，代表使用 40 MHz 的频道。如果设置为 0，代表使用 20 MHz 的频道。

## MIMO

MIMO 的天线配置通常表示成「YxZ」,其中 y 与 z 均为整数，分别代表传输天线与接收天线的数量。

举例而言，WWiSE 与 TGnSync 均将 2x2 操作列为必要，亦即使用两组传输链路，两组接收链路，以及两道经过多工处理·以电波链路传送的空间串。

MIMO 念成 “MyMoe”。我曾经参加一场研讨会 . 一位委员提到，标准委员会曾就 MIMO 的念法进行表决。

## MAC 效能的提升

### 问题

802.11 MAC 效能一向很差，大多数情况下，它很难达到硬件层额定位原率（nominal bit rate）的 50-60% 以上。

因为，每个待传数据帧都需要用到硬件层数据帧标头，以及只会造成负担的同步信号。

802.11 MAC 要求每个数据帧都需要得到回应，这也是额外的负担。对小型数据帧而言这些负担更是沉重，因为它们可能比数据帧数据本身用掉更多传输时间。

MAC 的效能，定义为【各种长度的数据帧中，MAC 承载数据(payload data)占额定位元的比例】。

任何网络量测都必须加计额外的 LLC 数据，经加密的网络也会有额外的负担。

此外，大多数网络协议都会提供本身的回应机制，这进一步拖累了实际的能效。

数据帧越小，效能越差。

### 改善

区块回应（数据帧宣泄）

数据帧合并（frame aggregation）。

#### 数据帧合并

WWiSE 建议书把可承载数据的最大长度，从 2304 位元组提高到 8000 以上。可承载数据变多相当于提升「数据负担比」，因此可以提升整体效能，如果较大的数据帧或数据帧宣泄能够顺利传送的话。

数据帧的合并是将几个较上层网络协议的封包装在单一数据帧。每个封包均包含一个带有来源与目的位址的次数据帧标头，以及指定封包大小的长度栏位，除非所要封装的各数据帧之 Address 1（数据帧的接收端）栏位值皆相同，否则无法合并数据帧。

![wifi-frame-aggregatio](/images/wifi-frame-aggregatio.png)



数据帧的合并通常会搭配 MAC 标头压缩，因为目的地相同的数据帧会有相当类似的 MAC 标头。

### Address 1、2、3、4

![wifi-基本的数据帧](/images/wifi-基本的数据帧.png)

Address 1 代表帧接收端的地址。在某些情况下，接收端即为目的地，但不然如此。目的地是指负责处理帧中网络层封包的工作站；而接收端则是负责将无线电解码为 802.11 帧的工作站。如果 Address 1 被设为广播或组播地址，则必须同时检查 BSSID（基本服务组合识别码）。工作站只会应答来自同一个基本服务组合（basic service set，简称 BSS）的广播或组播信息；至于来自其他不同 BSS 者则加以忽略。Address 2 是发送端的地址，用来发送应答信息。发送端就是源地址。源地址是指产生帧中网络层协议封包的工作站；而发送端则是负责将帧发送至无线链路。Address 3 位则是供基站与传输系统过滤之用，不过该位的用法，取决于所使用的网络类型。

![wifi-address 1、2、3、4](/images/wifi-address 1、2、3、4.png)

## 参考

[WIFI基础入门--802.11n--MIMO-OFDM-WWiSE--16](https://blog.csdn.net/qq_20677327/article/details/105397878)